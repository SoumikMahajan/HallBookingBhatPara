<script src="@Url.Content("~/js/jquery.min.js")" asp-append-version="true"></script>
<script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
<script src="@Url.Content("~/js/bootstrap.bundle.min.js")" asp-append-version="true"></script>
<script src="@Url.Content("~/js/izitoast.min.js")" asp-append-version="true"></script>
<script src="@Url.Content("~/Scripts/Global.js")" asp-append-version="true"></script>
<script src="@Url.Content("~/Scripts/Auth.js")" asp-append-version="true"></script>
<script src="@Url.Content("~/Scripts/UserBooking.js")" asp-append-version="true"></script>
<script src="@Url.Content("~/Scripts/Admin.js")" asp-append-version="true"></script>

@if (TempData["GlobalErrorMessage"] != null)
{
    <script type="text/javascript">
        $(document).ready(function () {
            notify(false, @Html.Raw(Json.Serialize(TempData["GlobalErrorMessage"])), true);
        });
    </script>
}

@if (TempData["GlobalSuccessMessage"] != null)
{
    <script type="text/javascript">
        $(document).ready(function () {
            notify(true, @Html.Raw(Json.Serialize(TempData["GlobalSuccessMessage"])), true);
        });
    </script>
}

<script>
    @if (User.Identity.IsAuthenticated)
    {
      <text>
      setInterval(function() {
         $.ajax({
            url: '@Url.Action("CheckTokenValidity", "Home")',
            type: 'GET',
            success: function(response) {
                // Token is still valid
            },
            error: function(xhr) {
               if (xhr.status === 401) {
                 // Token expired, redirect to login
                 notify(false, 'Your session has expired. Please login again.', true);                
                 window.location.href = '@Url.Action("Login", "User")';
               }
            }
         });
      }, 7200000);
      </text>
    }
</script>