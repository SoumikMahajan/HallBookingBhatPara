@{
    ViewData["Title"] = "BookingList";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
    body {
        background: #f2f4f8;
        font-family: 'Poppins', sans-serif;
        /* padding: 3rem 0; */
    }

    .header-container {
        max-width: 1000px;
        margin: 1rem auto;
        /* margin-top: 1rem;
        margin-right: auto;
        margin-bottom: 1rem;
        margin-left: auto; */
        background: linear-gradient(135deg, #0077b6, #023e8a);
        padding: 1rem 2rem;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        color: white;
        text-align: center;
        margin-bottom: 3rem;
    }

        .header-container h1 {
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .header-container p {
            opacity: 0.9;
            margin: 0;
        }

    .bookings-container {
        max-width: 1000px;
        margin: 1rem auto;
        display: grid;
        gap: 1.5rem;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        padding: 0 1rem;
    }

    .booking-card {
        background: white;
        padding: 1.5rem;
        border-radius: 12px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        position: relative;
        border-left: 4px solid #28a745;
    }

        .booking-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

    .booking-status {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: #28a745;
        color: white;
        padding: 0.3rem 0.8rem;
        border-radius: 15px;
        font-size: 0.8rem;
        font-weight: 600;
    }

        .booking-status.confirmed {
            background: #28a745;
        }

        .booking-status.pending {
            background: #ffc107;
            color: #333;
        }

        .booking-status.cancelled {
            background: #dc3545;
        }

    .hotel-info h3 {
        margin-bottom: 1rem;
        font-size: 1.4rem;
        font-weight: 600;
        color: #333;
        padding-right: 100px;
    }

    .booking-details {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0.5rem;
        margin-bottom: 1rem;
    }

    .detail-item {
        display: flex;
        flex-direction: column;
    }

    .detail-label {
        font-size: 0.85rem;
        color: #666;
        font-weight: 500;
        margin-bottom: 0.2rem;
    }

    .detail-value {
        font-size: 1rem;
        color: #333;
        font-weight: 600;
    }

    .booking-actions {
        display: flex;
        gap: 0.8rem;
        margin-top: 1.5rem;
    }

    .btn-action {
        flex: 1;
        padding: 0.6rem 1rem;
        border: none;
        border-radius: 8px;
        font-size: 0.9rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .btn-view {
        background: #0077b6;
        color: white;
    }

        .btn-view:hover {
            background: #023e8a;
            transform: translateY(-1px);
        }

    .btn-cancel {
        background: #dc3545;
        color: white;
    }

        .btn-cancel:hover {
            background: #c82333;
            transform: translateY(-1px);
        }

    .btn-modify {
        background: #6f42c1;
        color: white;
    }

        .btn-modify:hover {
            background: #5a2d91;
            transform: translateY(-1px);
        }

    .total-amount {
        text-align: right;
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px solid #eee;
    }

    .total-label {
        font-size: 0.9rem;
        color: #666;
    }

    .total-value {
        font-size: 1.3rem;
        font-weight: 700;
        color: #28a745;
    }

    .no-bookings {
        text-align: center;
        padding: 3rem;
        color: #666;
        font-size: 1.1rem;
    }

    .back-to-search {
        max-width: 1000px;
        margin: 2rem auto 0;
        text-align: center;
        padding: 0 1rem;
    }

    .btn-back {
        background: linear-gradient(135deg, #0077b6, #023e8a);
        color: white;
        border: none;
        padding: 0.8rem 2rem;
        border-radius: 25px;
        font-weight: 600;
        text-decoration: none;
        display: inline-block;
        transition: all 0.3s ease;
    }

        .btn-back:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 119, 182, 0.4);
            color: white;
            text-decoration: none;
        }
</style>

<div class="header-container">
    <h1>My Bookings</h1>
    <p>Manage your already booked hotels and reservations</p>
</div>

<div class="bookings-container" id="bookingsContainer">
    <!-- Bookings will be populated here -->
</div>

@* <div class="back-to-search">
    <a href="#" class="btn-back" onclick="goBackToSearch()">← Back to Hotel Search</a>
</div> *@

<script>
    const bookedHotels = [
        {
            id: 1,
            name: "Hotel Sunshine",
            city: "Kolkata",
            checkIn: "2025-07-25",
            checkOut: "2025-07-27",
            guests: 2,
            rooms: 1,
            totalAmount: 5000,
            bookingDate: "2025-07-20",
            bookingId: "HTL001",
            status: "confirmed"
        },
        {
            id: 2,
            name: "Royal Inn",
            city: "Mumbai",
            checkIn: "2025-08-10",
            checkOut: "2025-08-12",
            guests: 4,
            rooms: 2,
            totalAmount: 6400,
            bookingDate: "2025-07-18",
            bookingId: "HTL002",
            status: "confirmed"
        },
        {
            id: 3,
            name: "Sea View Resort",
            city: "Goa",
            checkIn: "2025-09-01",
            checkOut: "2025-09-04",
            guests: 3,
            rooms: 2,
            totalAmount: 13500,
            bookingDate: "2025-07-15",
            bookingId: "HTL003",
            status: "pending"
        },
        {
            id: 4,
            name: "Mountain Escape",
            city: "Manali",
            checkIn: "2025-07-30",
            checkOut: "2025-08-02",
            guests: 2,
            rooms: 1,
            totalAmount: 11400,
            bookingDate: "2025-07-19",
            bookingId: "HTL004",
            status: "confirmed"
        }
    ];

    function formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString('en-IN', {
            day: 'numeric',
            month: 'short',
            year: 'numeric'
        });
    }

    function getStatusClass(status) {
        return status.toLowerCase();
    }

    function getStatusText(status) {
        return status.charAt(0).toUpperCase() + status.slice(1);
    }

    function displayBookings() {
        const container = document.getElementById('bookingsContainer');

        if (bookedHotels.length === 0) {
            container.innerHTML = '<div class="no-bookings">No bookings found. Start planning your next trip!</div>';
            return;
        }

        bookedHotels.forEach(booking => {
            const card = document.createElement('div');
            card.className = 'booking-card';

            card.innerHTML = `
                <div class="booking-status ${getStatusClass(booking.status)}">
                    ${getStatusText(booking.status)}
                </div>

                <div class="hotel-info">
                    <h3>${booking.name}</h3>

                    <div class="booking-details">
                        <div class="detail-item">
                            <span class="detail-label">Check-in</span>
                            <span class="detail-value">${formatDate(booking.checkIn)}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Check-out</span>
                            <span class="detail-value">${formatDate(booking.checkOut)}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">City</span>
                            <span class="detail-value">${booking.city}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Booking ID</span>
                            <span class="detail-value">${booking.bookingId}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Guests</span>
                            <span class="detail-value">${booking.guests} Guest${booking.guests > 1 ? 's' : ''}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Rooms</span>
                            <span class="detail-value">${booking.rooms} Room${booking.rooms > 1 ? 's' : ''}</span>
                        </div>
                    </div>

                    <div class="total-amount">
                        <div class="total-label">Total Amount</div>
                        <div class="total-value">₹${booking.totalAmount.toLocaleString('en-IN')}</div>
                    </div>

                    <div class="booking-actions">
                        <button class="btn-action btn-view" onclick="viewBooking(${booking.id})">
                            View Details
                        </button>
                    </div>
                </div>
            `;

            container.appendChild(card);
        });
    }

    function viewBooking(bookingId) {
        const booking = bookedHotels.find(b => b.id === bookingId);
        alert(`Viewing details for ${booking.name}\nBooking ID: ${booking.bookingId}\nStatus: ${booking.status}`);
        // Add your view booking logic here
    }

    function modifyBooking(bookingId) {
        const booking = bookedHotels.find(b => b.id === bookingId);
        alert(`Modify booking for ${booking.name}\nBooking ID: ${booking.bookingId}`);
        // Add your modify booking logic here
    }

    function cancelBooking(bookingId) {
        const booking = bookedHotels.find(b => b.id === bookingId);
        if (confirm(`Are you sure you want to cancel your booking for ${booking.name}?`)) {
            booking.status = 'cancelled';
            document.getElementById('bookingsContainer').innerHTML = '';
            displayBookings();
            alert(`Booking ${booking.bookingId} has been cancelled.`);
        }
    }

    function goBackToSearch() {
        alert('Redirecting to hotel search page...');
        // Add navigation logic here
        // window.location.href = 'hotel-search.html';
    }

    // Initialize the page
    displayBookings();
</script>